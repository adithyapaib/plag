<!DOCTYPE html>
<html>

<head>
    <title>Plagiarism Check Results</title>
</head>

<body>
    <h1>Plagiarism Check Results</h1>
    <div id="original-text">
        <h2>Original Text:</h2>
        <p></p>
    </div>
    <div id="matches">
        <h2>Matches:</h2>
        <ul></ul>
    </div>
<div id="percentage">
        <h2>Turnitin Index:</h2>
        <p></p>
</div>
    <div id="word_count">
        <h2>Word Count:</h2>
        <p></p>
    </div>

    <script>
        const controller = new AbortController();

        const getData = async () => {
            const postData = {
                "data": "Hello guys My Name is Adithya Pai B, Im from Bejai Mangalore And I am currently the secretary at CEC, Mangalore which make me happy "
            };



                const response = await fetch('http://localhost:3000/', {
                    method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(postData)
})
.then(response => response.json())
.then(data => {
    const originalText = data.text;
                const matches = data.matches;
                const percentage = data.percent;
                const word_count = data.words_count;

                document.querySelector('#original-text p').textContent = originalText;
                document.querySelector('#percentage p').textContent = percentage;
                document.querySelector('#word_count p').textContent = word_count;


                for (let i = 0; i < matches.length; i++) {
                    const match = matches[i];
                    const matchUrl = match.url;
                    const matchPercent = match.percent;
                    const matchHighlights = match.highlight;

                    const matchListItem = document.createElement('li');
                    matchListItem.innerHTML = `<a href="${matchUrl}" target="_blank">${matchUrl}</a> (${matchPercent}%)`;
                    const highlightList = document.createElement('ul');

                    for (let j = 0; j < matchHighlights.length; j++) {
                        const highlight = matchHighlights[j];
                        const startIndex = parseInt(highlight[0]);
                        const endIndex = parseInt(highlight[1]);
                    }

                    matchListItem.appendChild(highlightList);
                    document.querySelector('#matches ul').appendChild(matchListItem);
                }
    
        
})
.catch(error => console.error(error));
                

        };

        console.log(getData());

    </script>
</body>

</html>